# OpenShift SNO Disconnected Cluster Configuration
# For use with Agent-Based Installer + Mirror Registry method
#
# This example deploys a Single Node OpenShift (SNO) cluster
# using agent-based installer pulling from a disconnected mirror registry.
# Network: VLAN 1924 via vyos-router (192.168.50.1)

# Site config (set to false for disconnected)
use_site_configs: false

# Pull secret path (should include mirror registry credentials)
pull_secret_path: ~/pull-secret.json

# Cluster metadata
base_domain: example.com
cluster_name: sno-disconnected

# Platform type (must be none for SNO)
platform_type: none

# VIPs - for SNO, these are the same as the node IP
api_vips:
  - 192.168.50.110
app_vips:
  - 192.168.50.110

# Optional NTP Servers
ntp_servers:
  - 216.239.35.0
  - 216.239.35.4

# DNS Server definitions (FreeIPA or other DNS)
dns_servers:
  - 192.168.122.161
dns_search_domains:
  - example.com

# Network configuration
cluster_network_cidr: 10.128.0.0/14
cluster_network_host_prefix: 23
service_network_cidrs:
  - 172.30.0.0/16
machine_network_cidrs:
  - 192.168.50.0/24

# Network type
network_type: OVNKubernetes

# Rendezvous IP (same as node IP for SNO)
rendezvous_ip: 192.168.50.110

# ZTP manifests
create_ztp_manifests: false

# Architecture
cluster_architecture: x86_64

# ============================================================================
# DISCONNECTED REGISTRY CONFIGURATION
# ============================================================================
# Mirror registry settings for disconnected installation
# These are used by the agent-based installer to pull images

# Disconnected registries list
disconnected_registries:
  - target: mirror-registry.example.com:8443
    source: quay.io
  - target: mirror-registry.example.com:8443
    source: registry.redhat.io
  - target: mirror-registry.example.com:8443
    source: registry.access.redhat.com

# Additional trust bundle (CA certificate for mirror registry)
# Set this to the path of your registry's CA certificate
additional_trust_bundle_path: ~/mirror-registry-ca.pem

# Image content sources (for oc-mirror results)
# These are typically generated by oc-mirror and found in:
#   oc-mirror-workspace/results-*/imageContentSourcePolicy.yaml
image_content_sources:
  - mirrors:
      - mirror-registry.example.com:8443/openshift/release-images
    source: quay.io/openshift-release-dev/ocp-release
  - mirrors:
      - mirror-registry.example.com:8443/openshift/release
    source: quay.io/openshift-release-dev/ocp-v4.0-art-dev



